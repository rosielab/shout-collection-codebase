(this["webpackJsonpshout-detection"]=this["webpackJsonpshout-detection"]||[]).push([[0],{179:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(43),i=n.n(r),s=(n(99),n(261)),c=n(63),l=n(16),u=n(10),d=n(275),h=n(264),b=n(276),p=n(266),f=n(260),j=n(122),m=n(120),x=n.n(m),g=n(268),y=n(249),O=n(251),v=n(262),w=n(255),S=n(259),k=n(258),C=n(257),I=n(1);function E(e){var t=e.imageUrl,n=e.imageAlt,a=e.header,o=e.body,r=e.onClick;return Object(I.jsx)(w.a,{sx:{maxWidth:345,minWidth:300,minHeight:200,margin:1},style:{backgroundColor:"#db848f"},children:Object(I.jsxs)(C.a,{sx:{height:"100%"},onClick:r,children:[t&&Object(I.jsx)(k.a,{component:"img",height:"140",image:t,alt:n}),Object(I.jsxs)(S.a,{children:[Object(I.jsx)(f.a,{gutterBottom:!0,variant:"h5",component:"div",align:"center",color:"#fff5f6",children:a}),Object(I.jsx)(f.a,{variant:"body2",color:"#ffffff",align:"center",children:o})]})]})})}var T=n.p+"static/media/rosie.e82cd17a.png",R=n.p+"static/media/logo.0a813fae.png",A=function(){return Object(I.jsx)(s.a,{children:Object(I.jsxs)(O.a,{container:!0,direction:"row",alignItems:"center",spacing:0,children:[Object(I.jsx)(O.a,{item:!0,xs:10,md:10,children:Object(I.jsx)("img",{src:T,alt:"ROSIE Logo",style:{maxWidth:"90%",maxHeight:"90%"}})}),Object(I.jsx)(O.a,{item:!0,xs:2,md:2,children:Object(I.jsx)("img",{src:R,alt:"Haiven Logo",style:{maxWidth:"90%",maxHeight:"90%"}})}),Object(I.jsxs)(O.a,{item:!0,xs:12,children:[Object(I.jsx)(f.a,{variant:"h5",sx:{marginBottom:1,marginTop:3},align:"center",children:"Welcome to ROSIE lab's shout data collection site"}),Object(I.jsxs)(f.a,{align:"center",children:["At ROSIE we build robots that are useful, friendly and fun! We believe that robots can help us automate simple, repetitive tasks while bringing joy to our lives. If you want to know more about ROSIE LAB please see ",Object(I.jsx)(v.a,{href:"https://www.rosielab.ca/",underline:"none",children:"our website"}),". We are currently working with Haiven, a non profit organization improving the lives of those living with intimate partner violence, to learn more about Haiven please see ",Object(I.jsx)(v.a,{href:"/ourPurpose",underline:"none",children:"Our Purpose"}),". We thank you very much for your support and hope that you will consider donating your voice today!"]})]})]})})};var D=n(250),N=n(253),P=n(15),F=n(17),W=n.n(F),U=n(30),B=n(256),_=function(){return Object(I.jsxs)(s.a,{children:[Object(I.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",marginBottom:3},children:"Some information before you begin"}),Object(I.jsx)(f.a,{variant:"body1",sx:{marginBottom:1},children:"First off please be aware that you will be yelling periodically for approximately 30 minutes. Please inform those around you so as not to alert, or cause distress to your neighbours and avoid any possible punitive actions."}),Object(I.jsxs)(f.a,{children:["Items to prepare:",Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{children:"Pants or jacket with pockets"}),Object(I.jsx)("li",{children:"Purse/backpack/bag"}),Object(I.jsx)("li",{children:"Something soft, e.g. pillow, blanket, sweater"})]})]}),Object(I.jsxs)(f.a,{children:["Understanding the voice levels",Object(I.jsxs)("ol",{children:[Object(I.jsx)("li",{children:"Speaking : this is a relaxed talking voice up to \u201craised voice\u201d"}),Object(I.jsx)("li",{children:"Shouting : this is raised voice until your voice breaks"}),Object(I.jsx)("li",{children:"Screaming : this is the highest level where you feel the breaking in your voice as you go into a scream"})]})]}),Object(I.jsxs)(f.a,{children:["You will be completing 19 recordings with three of each voice level. For each recording you will be given a random phrase and emotion as well as a position for your phone. Hold or place the phone in the provided position and do as follows:",Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{children:'say "a" and speak the phrase'}),Object(I.jsx)("li",{children:'say "b" and shout the phrase'}),Object(I.jsx)("li",{children:'say "c" and scream the phrase'})]}),'When you have finished, click "submit" and move on to the next recording']}),Object(I.jsx)(f.a,{children:"This page uses cookies. If you cannot complete all of the recordings at once you may start where you left off, given your cookies and cache have not been cleared."})]})},L=function(){return Object(I.jsxs)(s.a,{children:[Object(I.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",color:"primary.dark",marginBottom:3},children:"Thank you very much for submitting your voice!"}),Object(I.jsx)(f.a,{variant:"body1",sx:{marginBottom:1},children:"Take a screenshot of this page and email hello.haiven@gmail.com to receive a participation certificate!"}),Object(I.jsxs)(f.a,{variant:"body1",sx:{marginBottom:1},children:["Click ",Object(I.jsxs)(c.b,{to:"/",style:{color:"#7DBCFF"},children:[Object(I.jsx)("span",{"aria-hidden":"true"}),"here"]})," to return to the main page or exit to close"]})]})},M=n(24),H=n(3),G=n(263),q=n(235),z=n(265),V=n(247),Y=n(243),Q=n(189),K=n(248),X=n(244),J=function(e){var t=e.answerKey,n=e.options,a=e.questionType,o=e.question,r=e.getCurVal,i=e.handleChange,s=e.keysToClear;switch(a){case"radio":return Object(I.jsxs)(G.a,{sx:{marginBottom:2},component:"fieldset",children:[Object(I.jsx)(f.a,{sx:{fontWeight:"bold",marginBottom:1},children:o}),Object(I.jsx)(q.a,{sx:{display:"inline-flex"},onChange:function(e){return i(t,e.target.value,s)},value:r(t),name:"radio-buttons-group",children:n.map((function(e){return Object(I.jsx)(h.a,{sx:{marginBottom:1},children:Object(I.jsx)(z.a,{value:e,control:Object(I.jsx)(V.a,{}),label:e},e)},e)}))})]});case"text":return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(f.a,{sx:{fontWeight:"bold",marginBottom:2},children:o}),Object(I.jsx)(Y.a,{autoFocus:!0,label:"Type an answer",sx:{width:"25ch"},value:r(t)||"",onChange:function(e){return i(t,e.target.value,s)},inputProps:{autoComplete:"off"}})]});case"skipCheckbox":return Object(I.jsxs)(G.a,{sx:{marginBottom:2},children:[o&&Object(I.jsx)(f.a,{sx:{fontWeight:"bold",marginBottom:1},children:o}),Object(I.jsx)(Q.a,{sx:{display:"inline-flex"},children:n.map((function(e){return Object(I.jsx)(h.a,{children:Object(I.jsx)(z.a,{value:e,label:e,control:Object(I.jsx)(K.a,{checked:e===r(t),onChange:function(n){return i(t,r(t)===e?null:e,s)}})},e)},e)}))})]});case"searchSelect":return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(f.a,{sx:{fontWeight:"bold",marginBottom:1},children:o}),Object(I.jsx)(X.a,{disablePortal:!0,value:r(t)||null,id:"combo-box-demo",options:n,sx:{maxWidth:300,marginBottom:2},getOptionLabel:function(e){return e},renderOption:function(e,t){return Object(I.jsx)(h.a,Object(M.a)(Object(M.a)({component:"li"},e),{},{children:t}))},isOptionEqualToValue:function(e,t){return e===t||"Prefer not to disclose"===t},onChange:function(e,n){return i(t,n,s)},renderInput:function(e){return Object(I.jsx)(Y.a,Object(M.a)(Object(M.a)({},e),{},{label:"Select the answer",inputProps:Object(M.a)(Object(M.a)({},e.inputProps),{},{autoComplete:"off"})}))}})]});default:return Object(I.jsx)(I.Fragment,{})}},$=function(e){var t=e.question,n=e.answers,o=e.setAnswer,r=e.triggerAlert,i=Object(l.f)(),c=Object(a.useCallback)((function(){i.push(Ye.ACTIVITIES)}),[i]);return Object(I.jsx)(s.a,{sx:{display:"flex",flexDirection:"column"},children:Object(I.jsx)(J,{handleChange:function(e,a,i){(null===t||void 0===t?void 0:t.requireAlert)&&t.requireAlert.condition===a&&r(t.requireAlert.message,t.requireAlert.title,c,"Go Home");var s=Object(H.a)({},e,a);i&&i.forEach((function(e){s[e]=null})),o(Object(M.a)(Object(M.a)({},n),s))},getCurVal:function(e){return n[e]},question:t.question,answerKey:t.key,options:t.options,questionType:t.type,keysToClear:null===t||void 0===t?void 0:t.clearIfChange},t.key)})},Z=function(e){var t=e.phonePosition,n=e.script,a=e.affect,o=function(){return Object(I.jsx)(s.a,{sx:{paddingX:0},children:Object(I.jsx)(f.a,{variant:"h5",fontWeight:"fontWeightBold",sx:{fontSize:{xs:18,sm:18,md:24}},children:t})})},r=function(){return Object(I.jsx)(s.a,{sx:{paddingX:0},children:Object(I.jsxs)(f.a,{variant:"h5",sx:{color:"primary.dark",margin:2,fontSize:{xs:18,sm:18,md:24}},fontWeight:"fontWeightBold",children:["Please use this emotion: ",a]})})},i=function(){return Object(I.jsxs)(s.a,{sx:{paddingX:0},children:[Object(I.jsxs)(f.a,{variant:"h5",fontWeight:"fontWeightBold",sx:{fontSize:{xs:18,sm:18,md:24}},children:['Speak: "a, ',n,'"']}),Object(I.jsxs)(f.a,{variant:"h5",fontWeight:"fontWeightBold",sx:{fontSize:{xs:18,sm:18,md:24}},children:['Shout: "b, ',n,'"']}),Object(I.jsxs)(f.a,{variant:"h5",fontWeight:"fontWeightBold",sx:{marginBottom:4,fontSize:{xs:18,sm:18,md:24}},children:['Scream: "c, ',n,'"']}),Object(I.jsx)(f.a,{variant:"h5",sx:{fontSize:{xs:18,sm:18,md:24}},children:"You may listen to your audio and record as many times as you like, do not worry about any background noises, we want those! Click next to submit."})]})};return Object(I.jsxs)(s.a,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",marginBottom:3,paddingX:0},children:[Object(I.jsx)(o,{}),Object(I.jsx)(r,{}),Object(I.jsx)(i,{})]})},ee=n(80),te=n.n(ee),ne={type:"audio",mimeType:"audio/wav",recorderType:ee.StereoAudioRecorder,disableLogs:!0,timeSlice:1e3,ondataavailable:function(e){},checkForInactiveTracks:!1,onTimeStamp:function(e){},bitsPerSecond:128e3,audioBitsPerSecond:128e3,videoBitsPerSecond:128e3,frameInterval:90,previewStream:function(e){},bufferSize:16384,numberOfAudioChannels:1,frameRate:30,bitrate:128e3,elementClass:"multi-streams-mixer"};function ae(e){return Object(I.jsx)("div",{className:"timer",style:{display:"flex",alignItems:"center"},children:Object(I.jsx)(f.a,{variant:"h4",className:"digits",children:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),a=Math.floor(e-3600*t-60*n),o=n<10?"0"+n.toString():n.toString(),r=a<10?"0"+a.toString():a.toString();return t<=0?o+":"+r:"".concat(t,":").concat(o,":").concat(r)}(e.time)})})}var oe=n(118),re=n.n(oe),ie=n(117),se=n.n(ie),ce=n(267),le="You have a limit of 1.5 minute to record the audio. Please give it another try if you were not able to finish. If you did, click next!",ue=function(){return Object(I.jsx)(ce.a,{title:"Click to stop recording!",arrow:!0,children:Object(I.jsx)(se.a,{style:{color:"white",background:"#F16D6D",padding:10,borderRadius:"50%"}})})},de=function(e){return Object(I.jsx)(ce.a,{title:e.message,arrow:!0,children:Object(I.jsx)(re.a,{style:{color:"white",background:"#7DBCff",padding:10,borderRadius:"50%"}})})};function he(e){var t=e.setRecordingBlob,n=e.displayMessageAlert,o=Object(a.useState)(null),r=Object(u.a)(o,2),i=r[0],c=r[1],l=Object(a.useState)(),d=Object(u.a)(l,2),h=d[0],b=d[1],p=Object(a.useState)(""),f=Object(u.a)(p,2),j=f[0],m=f[1],x=Object(a.useState)(0),y=Object(u.a)(x,2),O=y[0],v=y[1],w=Object(a.useState)(!1),S=Object(u.a)(w,2),k=S[0],C=S[1],E=Object(a.useState)(!0),T=Object(u.a)(E,2),R=T[0],A=T[1],D=Object(a.useState)(!1),N=Object(u.a)(D,2),P=N[0],F=N[1],B=Object(a.useState)(null),_=Object(u.a)(B,2),L=_[0],M=_[1];Object(a.useEffect)((function(){var e=null;return k&&!R&&L?e=setInterval((function(){v(((new Date).getTime()-L)/1e3)}),100):clearInterval(e),function(){clearInterval(e)}}),[k,R,L]);var H=function(){C(!0),A(!1),M((new Date).getTime()),v(0)},G=function(){var e=Object(U.a)(W.a.mark((function e(n){var a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return m(n.toURL()),e.next=5,n.getBlob();case 5:a=e.sent,t(a),F(!0),C(!1),i.getTracks()&&i.getTracks().forEach((function(e){return e.stop()})),c(null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function q(){return z.apply(this,arguments)}function z(){return(z=Object(U.a)(W.a.mark((function e(){var t,a,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={audio:!0,video:!1},e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:a=e.sent,c(a),o=new te.a(a,ne),H(),9e4,o.setRecordingDuration(9e4,(function(){n(le),o.stopRecording((function(){G(o)}))})),o.startRecording(),b(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0 instanceof DOMException&&("NotFoundError"===e.t0.name||"DevicesNotFoundError"===e.t0.name?n("No microphone was found","You cannot record without a mic. We reccomend you plug in some headphones and try again"):"NotReadableError"===e.t0.name||"TrackStartError"===e.t0.name?n("Your microphone are already in use","You cannot record if your microphone is being used on another website or app. Please close that app and try again"):"OverconstrainedError"===e.t0.name||"ConstraintNotSatisfiedError"===e.t0.name||"NotAllowedError"===e.t0.name||"PermissionDeniedError"===e.t0.name?n("Please allow permission to use microphone","You cannot record the phrase without allowing permission to use the microphone."):n("Something went wrong and you cannot use your microphone","You'll have to refresh the page and try again"));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}var V=function(){var e=Object(U.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}if(h){e.next=3;break}return e.abrupt("return");case 3:h.stopRecording((function(){G(h)})),e.next=9;break;case 6:return e.next=8,q();case 8:F(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(I.jsxs)(s.a,{sx:{display:"flex",justifyContent:"center",flexWrap:{xs:"wrap",sm:"nowrap"}},children:[Object(I.jsx)(g.a,{onClick:function(){return V()},children:i?Object(I.jsx)(ue,{}):Object(I.jsx)(de,{message:j?"Click to retry recording again":"Click to record"})}),P&&Object(I.jsx)("audio",{style:{width:"100%",maxWidth:300},src:j,controls:!0}),i&&Object(I.jsx)(ae,{time:O})]})}var be,pe="under 18",fe=[{question:"What is your age?",options:[pe,"18-24","25-39","40-60","60 and over"],type:"radio",key:"age",requireAlert:{condition:pe,title:"Unfortunately, you cannot participate if you're under 18",message:"Our website will have features in the future for you to learn more about our discoveries. Check back later!"}},{question:"What is your gender?",options:["Man","Woman","Non-Binary","Other","Prefer not to disclose"],type:"radio",key:"gender"},{question:"What is the the first language you learned?",key:"firstLanguage",options:[""],type:"text"},{question:"What language do you currently use most often?",key:"currentLanguage",options:[""],type:"text"},{question:"What model of phone are you using?",key:"phoneModel",options:[""],type:"text"}],je=[{title:"Task Details",body:"You are invited to take part in our collection of shout and scream data. We will be collecting some demographic data to help us understand your voice. Participants will read from a script while moving their phone to various positions around their home. This data will be used in projects to help us detect screams and shouts in two projects. The first is an app being built in conjunction with the non-profit organization Haiven that detects and flags shouted speech from recordings to help those living with intimate partner violence track potentially problematic situations that can later be manually annotated by the user. The second is to detect which emotion is being expressed through shouts so that robot agents can better adapt their behaviour to the current context."},{title:"Voluntary Participation and Right to Withdraw",body:"Your participation is entirely voluntary. You may end your participation at any point without penalty by stopping your recording and not returning it to the researchers. However, once you have submitted your data it will not be possible to withdraw from the study as the data is stored without collection of your name or contact information. If you are participating in person you may ask the researcher to stop collection at any time."},{title:"Procedures",body:"Upon agreeing to this consent form, follow the steps provided by hitting 'next'. Be aware of any disturbances you may contribute to your surroundings. Please begin by filling out the pre-study questionnaire. Next, following the study instructions you will be recording yourself speaking, shouting and screaming several phrases with your phone in different positions around your home. The collection should take approximately 30 minutes. Collection may be done in your own home, or by scheduling a time by emailing ptuttosi@sfu.ca to come in person to either SFU Surrey or Burnaby for assistance and collection of the data."},{title:"Data Retention",body:"Data provided will be stored in a database for the use of future researchers. The data will be stored in ROSIE's Amazon Web Services (AWS) S3 bucket on Canadian servers until the data collection has concluded. Following this the data will be transferred to SFU Vault and the researcher's local computers for the duration of the research. Once research has concluded the data will be destroyed from any local devices and will be stored in the Federated Research Data Repository (FRDR) free to use for research purposes. Commercial use of the data will be provided to Haiven for their use in developing applications to improve the lives of those living with intimate partner violence. No other commercial use will be available."},{title:"Risks/Discomforts",body:'We do not think there is anything in this study that could harm you. It should be noted that this study will involve the need to repeatedly yell random phrases such as "banana and mustard sandwiches", if you are concerned that this may cause your neighbours distress or result in punitive action please make them aware and check your surroundings before participating in the study. We suggest that you schedule a time with the researchers by emailing ptuttosi@sfu.ca to complete your participation in person at SFU if you are concerned about your ability to scream in your own home as neither Haiven nor ROSIE Lab will be held responsible for repercussions of this activity.'},{title:"Benefits",body:"Although it may not directly benefit you, this study will benefit society by providing data for researchers understanding screams and the emotions they convey. Future use cases include scream and shout detection in applications monitoring violence and improving robots abilities to adapt to human emotions or distress."},{title:"Compensation",body:"You will receive a 10$ amazon gift card from your completion of this study."},{title:"Confidentiality",body:"In this study, we will collect your age group, sex, gender, first language learned and current primary language. However, no directly identifying data (e.g. name, e-mail address) will be stored along with your responses. We note that your voice will be used, and this could potentially be identifiable. Voice recordings will only be accessible by research personnel and will be securely stored as per designated in 'Data Retention'. All email correspondence will be permanently deleted once the conversation has concluded."},{title:"Inclusion and Exclusion Criteria",body:"We set inclusion criteria as those 18 years of age or older and have access to a mobile phone with recording capabilities. Participants should have a sufficient level of English comprehension to understand the consent obligations and follow the written study instructions. If you are participating inclusion criteria includes being fully vaccinated and you must show proof of vaccination to the research personnel. Exclusion criteria includes anyone that is: under the age of 18 years old or does not have access to a mobile phone able to record or is unable to read and understand the consent form and study instructions. If participating in person, not being fully vaccinated will exclude you from this study."},{title:"Contact Information",body:"If you have any questions about this study, you may contact ptuttosi@sfu.ca."},{title:"Concerns or Complaints",body:"If you have any concerns about your rights as a research participant and/or your experiences while participating in this study, you may contact the SFU Office of Research Ethics at dore@sfu.ca or 778-782-6618."},{body:"By selecting one or more of the options below, you are indicating that you have read the consent form, you are age 18 or older, and that you voluntarily agree to participate in this online research study. If you are interested in the results of the study, please check the Haiven and ROSIE websites for progress in our offerings and publications."}],me=function(e){var t=e.hasUserConsentResearch,n=(e.setHasUserConsentResearch,e.hasUserConsentCommercial),a=e.setHasUserConsentCommercial,o=e.setAnswer;return Object(I.jsxs)(s.a,{children:[Object(I.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",marginBottom:3},children:"Shouting Data Collection"}),Object(I.jsx)(f.a,{variant:"body1",sx:{marginBottom:2},children:"Researchers at Simon Fraser University are collecting emotional shout data to help us better detect this behaviour in order to improve detection of shouts for multiple uses including robotic assistants and improving the lives of those living with intimate partner violence."}),Object(I.jsx)(f.a,{sx:{marginBottom:3},children:Object(I.jsx)("b",{children:"Before participating in this study please read the following information."})}),je.map((function(e,t){return Object(I.jsxs)(s.a,{children:[Object(I.jsx)(f.a,{variant:"h5",sx:{fontWeight:"bold",marginBottom:1},children:e.title},"title-".concat(t)),Object(I.jsx)(f.a,{variant:"body1",sx:{marginBottom:3},children:e.body},"body-".concat(t))]},t)})),Object(I.jsxs)(s.a,{children:[Object(I.jsx)(z.a,{control:Object(I.jsx)(K.a,{onChange:function(e){o((function(t){return Object(M.a)(Object(M.a)({},t),{},{consentcommercial:e.target.checked})})),a(e.target.checked)},checked:n}),label:"I have read and accept the consent form"}),!t&&!n&&Object(I.jsx)(f.a,{variant:"body2",sx:{fontWeight:"bold",marginBottom:1,color:"red"},children:"You will have to accept at least one option and read the consent form to participate."})]})]})},xe=function(e){return Object(M.a)({},e)},ge=n(272),ye=n(269),Oe=n(274),ve=n(271),we=n(273),Se=n(270);!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED",e[e.LOADING=2]="LOADING",e[e.INFORM=3]="INFORM"}(be||(be={}));var ke=function(e){var t=e.open,n=e.setOpen,o=e.handleAgreeSubmit,r=e.alertMode,i=e.handleClose,s=r===be.LOADING,c=r===be.INFORM,l=Object(a.useState)(!1),d=Object(u.a)(l,2),h=d[0],b=d[1];return Object(I.jsxs)(ye.a,{open:t,onClose:function(){r!==be.LOADING&&n(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(I.jsxs)(Se.a,{id:"alert-dialog-title",children:[" ",function(){switch(r){case be.SUCCESS:return"Audio has been successfully submitted!";case be.FAILED:return"Audio has been failed to submit!";case be.INFORM:return"Are you sure you want to submit this audio?";case be.LOADING:return"Hold on, we are submitting your audio.";default:return""}}()," "]}),Object(I.jsx)(ve.a,{sx:{display:"flex",justifyContent:"center"},children:s?Object(I.jsx)(ge.a,{}):Object(I.jsxs)(we.a,{children:[" ",function(){switch(r){case be.SUCCESS:return"";case be.FAILED:return"Something went wrong. Give it another try. Click off this box to close.";case be.INFORM:return"You will not be able to go back to the previous questions if you click yes. We have to process your audio in order to retrieve your results.";default:return""}}()," "]})}),Object(I.jsxs)(Oe.a,{sx:{padding:2},children:[c&&Object(I.jsx)(g.a,{sx:{color:"neutral.dark",marginRight:1},onClick:function(){return n(!1)},children:"Cancel"}),!s&&Object(I.jsx)(g.a,{variant:"contained",onClick:function(){return function(){switch(r){case be.SUCCESS:return i();case be.FAILED:return o(b);case be.INFORM:return b(!0),o(b);default:return}}()},autoFocus:!0,disabled:h,children:function(){switch(r){case be.SUCCESS:return"Close";case be.FAILED:return"Try Again";case be.INFORM:return"Submit";default:return""}}()})]})]})},Ce=n(119),Ie=n.n(Ce),Ee=function(e){var t=e.open,n=e.setOpen,a=e.message,o=e.title,r=e.cta,i=e.buttonTitle;return Object(I.jsxs)(ye.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(I.jsxs)(Se.a,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[o&&Object(I.jsx)(s.a,{sx:{textAlign:"center"},children:Object(I.jsx)(f.a,{sx:{fontWeight:"bold"},children:o})}),Object(I.jsx)(p.a,{onClick:function(){return n(!1)},children:Object(I.jsx)(Ie.a,{})})]}),Object(I.jsx)(ve.a,{children:a}),Object(I.jsx)(Oe.a,{sx:{padding:2,justifyContent:"center"},children:r&&i&&Object(I.jsx)(g.a,{variant:"contained",onClick:r,children:i})})]})},Te=n(56),Re=n.n(Te);function Ae(e,t){return De.apply(this,arguments)}function De(){return(De=Object(U.a)(W.a.mark((function e(t,n){var a,o,r,i,s,c,l,u;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return" https://xu5j2jyxbf.execute-api.ca-central-1.amazonaws.com/dev/haiven-shout-data-collect-GetPresignedUrlAndStoreM-Q0c9eohPcVNG",a=D.a(),o="shout_data_".concat(a),"audio/wav",n.audioID=o,e.prev=5,e.next=8,Re.a.post(" https://xu5j2jyxbf.execute-api.ca-central-1.amazonaws.com/dev/haiven-shout-data-collect-GetPresignedUrlAndStoreM-Q0c9eohPcVNG",{fileName:o,fileType:"audio/wav",metaData:n});case 8:for(u in r=e.sent,i=r.data,s=i.fields,c={headers:{"Content-Type":"multipart/form-data"}},l=new FormData,s)l.append(u,s[u]);return l.append("file",t,o),e.next=17,Re.a.post(i.url,l,c);case 17:return e.abrupt("return",o);case 20:throw e.prev=20,e.t0=e.catch(5),new Error("Audio Failed to update: ".concat(e.t0));case 23:case"end":return e.stop()}}),e,null,[[5,20]])})))).apply(this,arguments)}function Ne(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(U.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(URL){e.next=2;break}throw new Error("No USER DATA ENDPOINT");case 2:return e.prev=2,e.next=5,Re.a.post("https://1zfqlslz47.execute-api.ca-central-1.amazonaws.com/dev/haiven-shout-data-collect-WriteUserDataToDynamoFun-MBA829CIx5dT",t,{headers:{"content-type":"application/json"}});case 5:if(200===(n=e.sent).status){e.next=8;break}throw new Error(n.statusText);case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),new Error("Failed to upload User Data: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function Fe(e){return We.apply(this,arguments)}function We(){return(We=Object(U.a)(W.a.mark((function e(t){var n,a,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_POLL_RESULTS){e.next=3;break}throw new Error("No POLL RESULTS DATA ENDPOINT");case 3:return e.prev=3,e.next=6,Re.a.get(n,{params:{audioID:t}});case 6:if(200===(a=e.sent).status){e.next=9;break}throw new Error(a.statusText);case 9:e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(3),!Re.a.isAxiosError(e.t0)){e.next=16;break}if(404!==(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.status)){e.next=16;break}return e.abrupt("return",null);case 16:throw new Error("Failed to upload User Data: ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}var Ue,Be;(Be=Ue||(Ue={}))[Be.CONSENT_PAGE=0]="CONSENT_PAGE",Be[Be.QUESTION_START=1]="QUESTION_START",Be[Be.QUESTION_END=fe.length]="QUESTION_END",Be[Be.INFO_PAGE=fe.length+1]="INFO_PAGE",Be[Be.FIRST_RECORDING=Be.INFO_PAGE+1]="FIRST_RECORDING";var _e=n(254),Le={1:"banana and mustard sandwiches",2:"wolf ring lights are fantastic",3:"hungry action hippos fruit",4:"another dog secretary show",5:"snow meteor down the chimney",6:"birds make new jingles",7:"heavy undersea birthday pumpkins",8:"fluffy baseboard yogurt division",9:"zebra cats walking on lamps",10:"five special guest treasures",11:"ripped ocean jumper",12:"five dollar slaw onion cure",13:"the thunder break craze",14:"join the Ear Look club"},Me={1:"neutral",2:"anger",3:"joy",4:"fear",5:"disgust",6:"surprise",7:"sadness"},He=["Hold your phone next to your face with the mic facing your mouth as you would in a phone conversation 1/19","Hold your phone next to your face but with the mic/phone facing away from your face 2/19","Hold your phone next to your face with your hand covering the mic 3/19","Hold your phone next to your hip with the back of phone on your palm 4/19","Hold your phone next to your hip with your hand covering the mic 5/19","Place your phone in your pocket 6/19","Place your phone in a bag and hold it next to your hip 7/19","Place phone 1-2 meters away face up on any surface 8/19","Place phone 1-2 meters away face down on a hard surface 9/19","Place phone 1-2 meters away face down on a soft surface 10/19","Place phone 1-2 meters away in a bag 11/19","Place phone on the opposite side of the room face up on any surface 12/19","Place phone on the opposite side of the room face down on a hard surface 13/19","Place phone on the opposite side of the room face down on a soft surface 14/19","Place phone on the opposite side of the room in a bag 15/19","Place phone as far away as possible while on on the opposite side of a wall from you face up on any surface 16/19","Place phone as far away as possible while on on the opposite side of a wall from you face down on a hard surface 17/19","Place phone as far away as possible while on on the opposite side of a wall from you face down on a soft surface 18/19","Place phone as far away as possible while on on the opposite side of a wall from you in a bag 19/19"];function Ge(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}var qe=function(e){var t=Object(a.useState)(-1),n=Object(u.a)(t,2),o=n[0],r=n[1],i=e.canonicalUserID,c=e.setCanonicalUserID,l=Object(a.useState)(function(e){return{userID:e,age:null,gender:null,firstLanguage:null,currentLanguage:null,phoneModel:null,consentresearch:null,consentcommercial:null}}(i)),d=Object(u.a)(l,2),b=d[0],p=d[1],f=Object(_e.a)(["step"]),j=Object(u.a)(f,3),m=j[0],x=j[1],y=j[2],O=Object(_e.a)(["userID"]),v=Object(u.a)(O,3),w=v[0],S=v[1],k=v[2],C=Object(a.useState)(!1),E=Object(u.a)(C,2),T=E[0],R=E[1];Object(a.useEffect)((function(){void 0===w.userID&&void 0===m.step&&(R(!0),S("userID",i,{path:"/"}),x("step",0,{path:"/"}),r(0))}),[]);var A=Object(a.useState)(!1),D=Object(u.a)(A,2),N=D[0],F=D[1],M=Object(a.useState)(!1),H=Object(u.a)(M,2),G=H[0],q=H[1],z=Object(a.useState)({title:"",message:""}),V=Object(u.a)(z,2),Y=V[0],Q=V[1],K=Object(a.useState)(be.INFORM),X=Object(u.a)(K,2),J=X[0],ee=X[1],te=Object(a.useState)(),ne=Object(u.a)(te,2),ae=ne[0],oe=ne[1],re=Object(a.useState)(),ie=Object(u.a)(re,2),se=ie[0],ce=ie[1],le=Object(a.useState)(!1),ue=Object(u.a)(le,2),de=ue[0],pe=ue[1],je=Object(a.useState)(0),ge=Object(u.a)(je,2),ye=ge[0],Oe=ge[1],ve=Object(a.useState)(!1),we=Object(u.a)(ve,2),Se=we[0],Ce=we[1],Ie=Object(a.useState)(!1),Te=Object(u.a)(Ie,2),Re=Te[0],De=Te[1],Pe=Object(a.useState)([]),We=Object(u.a)(Pe,2),Be=We[0],qe=We[1],ze=Object(a.useCallback)((function(e){p(e)}),[]),Ve=function(e,t,n,a){Q({title:t||"",message:e,cta:n,buttonTitle:a}),q(!0)},Ye=function(){var e=Object(U.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ze){e.next=5;break}return F(!0),e.abrupt("return");case 5:if(o!==Ue.INFO_PAGE){e.next=9;break}return t=xe(b),e.next=9,Ne(t);case 9:-1===o?(x("step",o+2,{path:"/"}),r(o+2)):o<$e?(x("step",o+1,{path:"/"}),r(o+1)):o===$e-1&&(x("step",Je.length-1,{path:"/"}),r(Je.length-1));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=Object(a.useMemo)((function(){return He.map((function(e,t){var n=Le[Ge(1,Object.keys(Le).length)],a=Me[Ge(1,Object.keys(Me).length)];return qe((function(t){return[].concat(Object(P.a)(t),[{phoneposition:e,affect:a,script:n}])})),Object(I.jsx)(Z,{phonePosition:e,script:n,affect:a})}))}),[]),Ke=[Object(I.jsx)(me,{hasUserConsentResearch:Se,setHasUserConsentResearch:Ce,hasUserConsentCommercial:Re,setHasUserConsentCommercial:De,setAnswer:p})].concat(Object(P.a)(fe.map((function(e,t){return Object(I.jsx)($,{triggerAlert:Ve,question:e,answers:b,setAnswer:ze},t)}))),[Object(I.jsx)(_,{})]),Xe=[Object(I.jsx)(L,{})],Je=[].concat(Object(P.a)(Ke),Object(P.a)(Qe),Xe),$e=Je.length-1,Ze=o===Ue.FIRST_RECORDING||o>Ue.FIRST_RECORDING&&o<$e,et=function(){var e=Object(U.a)(W.a.mark((function e(t){var n,a,r,s,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae){e.next=3;break}return t(!1),e.abrupt("return");case 3:return e.prev=3,n=Be[o-Ke.length],a=n.phoneposition,r=n.affect,s=n.script,e.next=7,Ae(ae,{userID:i,phoneposition:a,affect:r,script:s});case 7:c=e.sent,o===Ue.FIRST_RECORDING&&ce(c),ee(be.SUCCESS),oe(void 0),t(!1),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0),ee(be.FAILED),t(!1);case 19:t(!1);case 20:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){Ze&&!N&&ee(be.INFORM)}),[Ze,N]);!function(e,t,n){var o=Object(a.useRef)();Object(a.useEffect)((function(){n&&(o.current=e)}),[e,n]),Object(a.useEffect)((function(){if(n&&null!==t){var e=setInterval((function(){o.current()}),t);return function(){clearInterval(e)}}}),[e,t,n])}(Object(U.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se){e.next=7;break}return e.next=3,Fe(se);case 3:e.sent&&pe(!1),ye>=8&&pe(!1),Oe(ye+1);case 7:case"end":return e.stop()}}),e)}))),1e4,de),Object(a.useEffect)((function(){function e(){return(e=Object(U.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t);case 2:return(n=e.sent)||pe(!0),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ze&&se&&function(t){e.apply(this,arguments)}(se)}),[se,Ze]);var tt=-1!==o&&0!==o&&o<=Ue.FIRST_RECORDING,nt=-1!==o&&o!==$e;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(B.a,{sx:{display:"flex",flex:1,flexDirection:"column",padding:3},children:[!T&&Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{children:"Do you want to resume where you left off?"}),Object(I.jsx)(g.a,{onClick:function(){R(!0),parseInt(m.step,10)>=fe.length+2?(r(parseInt(m.step,10)),c(w.userID)):(y("step"),k("userID"),r(0),S("userID",i,{path:"/"}))},children:"Yes"}),Object(I.jsx)(g.a,{onClick:function(){y("step"),k("userID"),r(0),S("userID",i,{path:"/"}),R(!0)},children:"No"})]}),Object(I.jsx)(s.a,{sx:{flex:1},children:Je[o]}),Object(I.jsxs)(h.a,{sx:{justifyContent:"space-between",display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"}},children:[tt&&Object(I.jsx)(g.a,{variant:"contained",style:{backgroundColor:"#db848f"},sx:{order:{xs:1,sm:0},width:70,height:40,marginTop:{xs:4,sm:0}},onClick:function(){o>0&&r(o-1),x("step",o-1,{path:"/"})},children:"Back"}),function(){if(o>=Ue.FIRST_RECORDING&&o!==$e)return Object(I.jsx)(he,{setRecordingBlob:oe,displayMessageAlert:Ve},o)}(),nt&&Object(I.jsx)(g.a,{variant:"contained",style:{backgroundColor:"#db848f"},onClick:Ye,disabled:!(o===Ue.CONSENT_PAGE?1:o<=Ue.QUESTION_END&&o>=Ue.QUESTION_START?function(e,t){if((null===t||void 0===t?void 0:t.requireAlert)&&t.requireAlert.condition===e[t.key])return!1;var n=null===t||void 0===t?void 0:t.followUpQuestions,a=!!e[t.key];if(!n)return a;var o=n.every((function(t){var n=!!e[t.key];return null===t.condition?n:!(e[t.condition.key]===t.condition.answer)||n}));return a&&o}(b,fe[o-Ue.QUESTION_START]):!Ze||ae),sx:{order:{xs:2,sm:2},width:70,height:40,marginTop:{xs:4,sm:0},marginLeft:{xs:"auto"}},children:"Next"})]}),Object(I.jsx)(ke,{open:N,setOpen:F,handleAgreeSubmit:function(e){return et(e)},alertMode:J,handleClose:function(){F(!1),r(o+1),x("step",o+1,{path:"/"}),ee(be.INFORM)}}),Object(I.jsx)(Ee,{open:G,setOpen:q,message:Y.message,title:Y.title,cta:null===Y||void 0===Y?void 0:Y.cta,buttonTitle:null===Y||void 0===Y?void 0:Y.buttonTitle})]})})},ze=n(121),Ve=Object(ze.a)({palette:{primary:{light:"#db848f",main:"#db848f",dark:"#db848f",contrastText:"#fff"},neutral:{light:"#db848f",main:"#db848f",dark:"#db848f"}},components:{MuiFilledInput:{styleOverrides:{root:{backgroundColor:"#db848f","&:hover":{backgroundColor:"#db848f"},"&.Mui-focused":{backgroundColor:"#db848f"}}}},MuiInputLabel:{styleOverrides:{root:{"&.Mui-focused":{color:"#db848f"}}}}}}),Ye={ACTIVITIES:"/",DONATE_SHOUTS:"/donateShouts",OUR_PURPOSE:"/ourPurpose"},Qe=[{path:Ye.ACTIVITIES,component:function(){var e=Object(l.f)(),t=Object(a.useCallback)((function(t){e.push(t)}),[e]),n=[{header:"Donate your shouts",body:"Click here to help us better understand shouted speech",onclick:function(){return t(Ye.DONATE_SHOUTS)}}];return Object(I.jsxs)(s.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[Object(I.jsx)(A,{}),n.map((function(e,t){return Object(I.jsx)(E,{header:e.header,body:e.body,onClick:function(){e.onclick()}},t)}))]})}},{path:Ye.DONATE_SHOUTS,component:function(){var e=Object(a.useState)("user_".concat(D.a())),t=Object(u.a)(e,2),n=t[0],o=t[1];return Object(I.jsx)(N.a,{theme:Ve,children:Object(I.jsx)(qe,{canonicalUserID:n,setCanonicalUserID:o})})}},{path:Ye.OUR_PURPOSE,component:function(){return Object(I.jsxs)(s.a,{children:[Object(I.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",marginBottom:3},children:"About ROSIE Lab"}),Object(I.jsx)(f.a,{variant:"body1",sx:{marginBottom:2},children:"We build robots that are useful, friendly and fun! We believe that robots can help us automate simple, repetitive tasks while bringing joy to our lives."}),Object(I.jsx)(f.a,{children:"We work on 3 main areas:"}),Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{children:"Building robots that are useful and interact naturally and seamlessly with humans."}),Object(I.jsx)("li",{children:"Developing smart AI software to help robots understand what humans do, think, feel and mean."}),Object(I.jsx)("li",{children:"Creating new AI algorithms and implementing models of the human mind based on neuroscience, psychology and developmental science."})]}),Object(I.jsxs)(f.a,{variant:"body1",sx:{marginBottom:2},children:["To learn more about ROSIE lab see ",Object(I.jsx)(v.a,{href:"https://www.rosielab.ca/",underline:"none",children:"our website"})]}),Object(I.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",marginBottom:3},children:"About Haiven"}),Object(I.jsx)(f.a,{variant:"h5",sx:{fontWeight:"bold",marginBottom:3},children:"Haiven's Mission"}),Object(I.jsx)(f.a,{variant:"body1",sx:{marginBottom:2},children:"Our mission is to provide victims and survivors of abuse with software services to improve their well-being and independence. Haiven is addressing not only the crisis of intimate partner violence but also the aftermath by supporting those living with and surviving domestic violence, supporting agency, empowerment and security by providing guided access to our network of partnerships."}),Object(I.jsx)(f.a,{variant:"h5",sx:{fontWeight:"bold",marginBottom:3},children:"Haiven's Vision"}),Object(I.jsx)(f.a,{variant:"body1",sx:{marginBottom:2},children:"Our vision is to be able to create accessible technology and services to help someone through the process of exiting an abusive relationship and ensure they have the economic power to leave and stay out of it."})]})}}],Ke=[{name:"Data Collection",route:Ye.ACTIVITIES},{name:"Our Purpose",route:Ye.OUR_PURPOSE}],Xe=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(l.f)(),i=Object(a.useCallback)((function(e){o(null),r.push(e)}),[r]),c=Object(a.useCallback)((function(){return r.push(Ye.ACTIVITIES)}),[r]);return Object(I.jsx)(d.a,{position:"static",sx:{backgroundColor:"#db848f"},children:Object(I.jsx)(s.a,{maxWidth:"xl",children:Object(I.jsxs)(b.a,{disableGutters:!0,children:[Object(I.jsx)(f.a,{variant:"h6",noWrap:!0,component:"div",sx:{mr:2,display:{xs:"none",md:"flex"}}}),Object(I.jsxs)(h.a,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[Object(I.jsx)(p.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit",children:Object(I.jsx)(x.a,{})}),Object(I.jsx)(j.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(n),onClose:function(){o(null)},sx:{display:{xs:"block",md:"none"}},children:Ke.map((function(e){var t=e.name,n=e.route;return Object(I.jsx)(y.a,{onClick:function(){return i(n)},children:Object(I.jsx)(f.a,{textAlign:"center",children:t})},t)}))})]}),Object(I.jsx)(f.a,{variant:"h6",noWrap:!0,component:"div",onClick:c,sx:{flexGrow:1,fontFamily:"'Quicksand', 'sans-serif'",cursor:"pointer"},children:"ROSIE Lab Shout Collection"}),Object(I.jsx)(h.a,{sx:{flexGrow:0,display:{xs:"none",md:"flex"}},children:Ke.map((function(e){var t=e.name,n=e.route;return Object(I.jsx)(g.a,{onClick:function(){i(n)},sx:{my:2,color:"white",display:"block"},children:t},t)}))})]})})})},Je=function(){return Object(I.jsxs)(c.a,{children:[Object(I.jsx)(Xe,{}),Object(I.jsx)(s.a,{sx:{padding:{xs:2,md:5},minHeight:"85vh",width:"100vw",display:"flex",flexDirection:"column"},className:"App",children:Object(I.jsx)(l.c,{children:Qe.map((function(e){var t=e.path,n=e.component;return Object(I.jsx)(l.a,{exact:!0,path:t,component:n},t)}))})})]})},$e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,277)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),r(e),i(e)}))},Ze=n(241);i.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(Ze.a,{children:Object(I.jsx)(Je,{})})}),document.getElementById("root")),$e()},99:function(e,t,n){}},[[179,1,2]]]);
//# sourceMappingURL=main.9677e7fb.chunk.js.map